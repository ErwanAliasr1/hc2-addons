{"name":"TV","type":"virtual_device","properties":{"deviceIcon":6,"currentIcon":"0","log":"","logTemp":"","mainLoop":"","visible":"true","rows":[{"type":"button","elements":[{"id":1,"lua":true,"waitForResponse":false,"caption":"Mute","name":"mute","empty":false,"msg":"local command = \"NRC_MUTE-ONOFF\";\n--------------------------------------------------------\nlocal selfId = fibaro:getSelfId();\nlocal _deviceIp = fibaro:get(selfId, \"IPAddress\");\nlocal _devicePort = fibaro:get(selfId, \"TCPPort\");\npanasonicTvTcp = Net.FTcpSocket(_deviceIp, _devicePort)\nrequestMethod = \"POST /nrc/control_0 HTTP/1.1\"\ncustom_header = \"SOAPACTION: \\\"urn:panasonic-com:service:p00NetworkControl:1#X_SendKey\\\"\"\nlocal payload = \"<s:Envelope xmlns:s=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" s:encodingStyle=\\\"http://schemas.xmlsoap.org/soap/encoding/\\\"><s:Body><u:X_SendKey xmlns:u=\\\"urn:panasonic-com:service:p00NetworkControl:1\\\"><X_KeyEvent>\"..command..\"</X_KeyEvent></u:X_SendKey></s:Body></s:Envelope>\"\ntcpstring =\nrequestMethod .. \"\\r\\n\" ..\n\"CONTENT-LENGTH: \" .. string.len(payload) .. \"\\r\\n\" ..\ncustom_header .. \"\\r\\n\\r\\n\" ..\npayload\n \nbytes, errorCode = panasonicTvTcp:write(tcpstring)\nif errorCode == 0 then\nfibaro:debug(\"tcp write OK\")\nelse\nfibaro:debug(\"tcp write failed\")\nend","buttonIcon":0,"favourite":false,"main":false},{"id":2,"lua":true,"waitForResponse":false,"caption":"ON / OFF","name":"onoff","empty":false,"msg":"local command = \"NRC_POWER-ONOFF\";\n--------------------------------------------------------\nlocal selfId = fibaro:getSelfId();\nlocal _deviceIp = fibaro:get(selfId, \"IPAddress\");\nlocal _devicePort = fibaro:get(selfId, \"TCPPort\");\npanasonicTvTcp = Net.FTcpSocket(_deviceIp, _devicePort)\nrequestMethod = \"POST /nrc/control_0 HTTP/1.1\"\ncustom_header = \"SOAPACTION: \\\"urn:panasonic-com:service:p00NetworkControl:1#X_SendKey\\\"\"\nlocal payload = \"<s:Envelope xmlns:s=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" s:encodingStyle=\\\"http://schemas.xmlsoap.org/soap/encoding/\\\"><s:Body><u:X_SendKey xmlns:u=\\\"urn:panasonic-com:service:p00NetworkControl:1\\\"><X_KeyEvent>\"..command..\"</X_KeyEvent></u:X_SendKey></s:Body></s:Envelope>\"\ntcpstring =\nrequestMethod .. \"\\r\\n\" ..\n\"CONTENT-LENGTH: \" .. string.len(payload) .. \"\\r\\n\" ..\ncustom_header .. \"\\r\\n\\r\\n\" ..\npayload\n \nbytes, errorCode = panasonicTvTcp:write(tcpstring)\nif errorCode == 0 then\nfibaro:debug(\"tcp write OK\")\nelse\nfibaro:debug(\"tcp write failed\")\nend","buttonIcon":0,"favourite":false,"main":true}]},{"type":"button","elements":[{"id":3,"lua":true,"waitForResponse":false,"caption":"VOL +","name":"volplus","empty":false,"msg":"local command = \"NRC_VOLUP-ONOFF\";\n--------------------------------------------------------\nlocal selfId = fibaro:getSelfId();\nlocal _deviceIp = fibaro:get(selfId, \"IPAddress\");\nlocal _devicePort = fibaro:get(selfId, \"TCPPort\");\npanasonicTvTcp = Net.FTcpSocket(_deviceIp, _devicePort)\nrequestMethod = \"POST /nrc/control_0 HTTP/1.1\"\ncustom_header = \"SOAPACTION: \\\"urn:panasonic-com:service:p00NetworkControl:1#X_SendKey\\\"\"\nlocal payload = \"<s:Envelope xmlns:s=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" s:encodingStyle=\\\"http://schemas.xmlsoap.org/soap/encoding/\\\"><s:Body><u:X_SendKey xmlns:u=\\\"urn:panasonic-com:service:p00NetworkControl:1\\\"><X_KeyEvent>\"..command..\"</X_KeyEvent></u:X_SendKey></s:Body></s:Envelope>\"\ntcpstring =\nrequestMethod .. \"\\r\\n\" ..\n\"CONTENT-LENGTH: \" .. string.len(payload) .. \"\\r\\n\" ..\ncustom_header .. \"\\r\\n\\r\\n\" ..\npayload\n \nbytes, errorCode = panasonicTvTcp:write(tcpstring)\nif errorCode == 0 then\nfibaro:debug(\"tcp write OK\")\nelse\nfibaro:debug(\"tcp write failed\")\nend","buttonIcon":0,"favourite":false,"main":false},{"id":4,"lua":true,"waitForResponse":false,"caption":"VOL -","name":"volmoins","empty":false,"msg":"local command = \"NRC_VOLDOWN-ONOFF\"\";\n--------------------------------------------------------\nlocal selfId = fibaro:getSelfId();\nlocal _deviceIp = fibaro:get(selfId, \"IPAddress\");\nlocal _devicePort = fibaro:get(selfId, \"TCPPort\");\npanasonicTvTcp = Net.FTcpSocket(_deviceIp, _devicePort)\nrequestMethod = \"POST /nrc/control_0 HTTP/1.1\"\ncustom_header = \"SOAPACTION: \\\"urn:panasonic-com:service:p00NetworkControl:1#X_SendKey\\\"\"\nlocal payload = \"<s:Envelope xmlns:s=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\" s:encodingStyle=\\\"http://schemas.xmlsoap.org/soap/encoding/\\\"><s:Body><u:X_SendKey xmlns:u=\\\"urn:panasonic-com:service:p00NetworkControl:1\\\"><X_KeyEvent>\"..command..\"</X_KeyEvent></u:X_SendKey></s:Body></s:Envelope>\"\ntcpstring =\nrequestMethod .. \"\\r\\n\" ..\n\"CONTENT-LENGTH: \" .. string.len(payload) .. \"\\r\\n\" ..\ncustom_header .. \"\\r\\n\\r\\n\" ..\npayload\n \nbytes, errorCode = panasonicTvTcp:write(tcpstring)\nif errorCode == 0 then\nfibaro:debug(\"tcp write OK\")\nelse\nfibaro:debug(\"tcp write failed\")\nend","buttonIcon":0,"favourite":false,"main":false}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}