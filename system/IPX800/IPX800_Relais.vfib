{"name":"IPX800 Relais","type":"virtual_device","properties":{"deviceIcon":10,"currentIcon":"8","log":"","logTemp":"","mainLoop":"fibaro:call(fibaro:getSelfId(), \"pressButton\", \"26\")\nfibaro:sleep(2000)","ui.Label1.value":" ■  ■  ■  □  □  □  □  □ ","visible":"true","rows":[{"type":"label","elements":[{"id":1,"lua":false,"waitForResponse":false,"caption":"Status","name":"Label1","favourite":false,"main":true}]},{"type":"button","elements":[{"id":2,"lua":true,"waitForResponse":false,"caption":"On","name":"Button41","empty":false,"msg":"--Set011\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set1=1\")\n\n","buttonIcon":0,"favourite":false,"main":false},{"id":3,"lua":false,"waitForResponse":false,"caption":"R1","name":"Button42","empty":false,"msg":"","buttonIcon":0,"favourite":false,"main":false},{"id":4,"lua":true,"waitForResponse":false,"caption":"Off","name":"Button43","empty":false,"msg":"--Set010\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set1=0\")\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":5,"lua":true,"waitForResponse":false,"caption":"On","name":"Button51","empty":false,"msg":"--Set021\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set2=1\")\n","buttonIcon":0,"favourite":false,"main":false},{"id":6,"lua":false,"waitForResponse":false,"caption":"Internet","name":"Button52","empty":false,"msg":"","buttonIcon":0,"favourite":false,"main":false},{"id":7,"lua":true,"waitForResponse":false,"caption":"Off","name":"Button53","empty":false,"msg":"--Set020\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set2=0\")\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":8,"lua":true,"waitForResponse":false,"caption":"On","name":"Button61","empty":false,"msg":"--Set031\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set3=1\")\n","buttonIcon":0,"favourite":false,"main":false},{"id":9,"lua":false,"waitForResponse":false,"caption":"R3","name":"Button62","empty":false,"msg":"","buttonIcon":0,"favourite":false,"main":false},{"id":10,"lua":true,"waitForResponse":false,"caption":"Off","name":"Button63","empty":false,"msg":"--Set030\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set3=0\")\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":11,"lua":true,"waitForResponse":false,"caption":"On","name":"Button71","empty":false,"msg":"--Set041\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set4=1\")\n","buttonIcon":0,"favourite":false,"main":false},{"id":12,"lua":false,"waitForResponse":false,"caption":"R4","name":"Button72","empty":false,"msg":"","buttonIcon":0,"favourite":false,"main":false},{"id":13,"lua":true,"waitForResponse":false,"caption":"Off","name":"Button73","empty":false,"msg":"--Set040\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set4=0\")\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":14,"lua":true,"waitForResponse":false,"caption":"On","name":"Button81","empty":false,"msg":"--Set051\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set5=1\")\n","buttonIcon":0,"favourite":false,"main":false},{"id":15,"lua":false,"waitForResponse":false,"caption":"R5","name":"Button82","empty":false,"msg":"","buttonIcon":0,"favourite":false,"main":false},{"id":16,"lua":true,"waitForResponse":false,"caption":"Off","name":"Button83","empty":false,"msg":"--Set050\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set5=0\")\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":17,"lua":true,"waitForResponse":false,"caption":"On","name":"Button91","empty":false,"msg":"--Set061\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set6=1\")\n","buttonIcon":0,"favourite":false,"main":false},{"id":18,"lua":false,"waitForResponse":false,"caption":"R6","name":"Button92","empty":false,"msg":"","buttonIcon":0,"favourite":false,"main":false},{"id":19,"lua":true,"waitForResponse":false,"caption":"Off","name":"Button93","empty":false,"msg":"--Set060\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set6=0\")\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":20,"lua":true,"waitForResponse":false,"caption":"On","name":"Button11","empty":false,"msg":"--Set071\n\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set7=1\")\n","buttonIcon":0,"favourite":false,"main":true},{"id":21,"lua":false,"waitForResponse":false,"caption":"Ouvrir","name":"Button12","empty":false,"msg":"Chaine à envoyer","buttonIcon":0,"favourite":false,"main":false},{"id":22,"lua":true,"waitForResponse":false,"caption":"Off","name":"Button13","empty":false,"msg":"--Set070\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set7=0\")\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":23,"lua":true,"waitForResponse":false,"caption":"On","name":"ButtonOn8","empty":false,"msg":"--Set081\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set8=1\")\n","buttonIcon":0,"favourite":false,"main":false},{"id":24,"lua":false,"waitForResponse":false,"caption":"Fermer","name":"Button102","empty":false,"msg":"","buttonIcon":0,"favourite":false,"main":false},{"id":25,"lua":true,"waitForResponse":false,"caption":"Off","name":"Button103","empty":false,"msg":"--Set080\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/preset.htm?set8=0\")\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":26,"lua":true,"waitForResponse":false,"caption":"Rafraichir","name":"Button271","empty":false,"msg":"local status = \"\"\n\nlocal ip_module = fibaro:get(fibaro:getSelfId(),\"IPAddress\")\n\nHC2 = Net.FHttp(ip_module)\nresponse = HC2:GET(\"/api/xdevices.json?cmd=20\")\n--fibaro:debug(response)\n\n\nlocal status = \"\"\nstring.gsub(response, \":(%d+)\", function(d) status = status .. d end)\nfibaro:debug(response)\n\nstatus = string.sub(status, 1, 8) \nstatus = string.gsub(status, \"1\", \" ■ \" )\nstatus = string.gsub(status, \"0\", \" □ \")\n\nfibaro:call(fibaro:getSelfId(), \"setProperty\", \"ui.Label1.value\", status)\n--fibaro:call(fibaro:getSelfId(), \"setProperty\", \"currentIcon\", \"8\")\n\nresponse = HC2:GET(\"/api/xdevices.json?cmd=30\")\nlocal an5 = 0\nlocal an6 = 0\nlocal an7 = 0\nstring.gsub(response, \"AN5\\\":(%d+)\", function(d) an5 = tonumber(d)*0.5 end)\nstring.gsub(response, \"AN6\\\":(%d+)\", function(d) an6 = tonumber(d)*0.5 end)\nstring.gsub(response, \"AN7\\\":(%d+)\", function(d) an7 = tonumber(d)*0.5 end)\n\n\nfunction round(num, dec)\n\tlocal mult = 10^(dec or 2)\n \treturn math.floor(num * mult + 0.5) / mult\nend\n\nfibaro:setGlobal(\"AN5\", round((an5* 0.00643)*230))\nfibaro:setGlobal(\"AN6\", round((an6* 0.00643)*230))\nfibaro:setGlobal(\"AN7\", round((an7* 0.00643)*230))\n","buttonIcon":8,"favourite":false,"main":false}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}